<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š ì˜¤ëŠ˜ì˜ ì½ì„ê±°ë¦¬</title>
    <!-- í°íŠ¸ ë¡œë“œ (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Noto Sans KR í°íŠ¸ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ë˜, Inter í°íŠ¸ fallback */
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (Tailwind ìœ í‹¸ë¦¬í‹°ë¡œë„ ê°€ëŠ¥í•˜ì§€ë§Œ, CSSê°€ ë” í™•ì‹¤í•¨) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            DEFAULT: '#6366F1', // indigo-500
                            light: '#818CF8',   // indigo-400
                            dark: '#4F46E5',    // indigo-600
                        },
                        secondary: '#EC4899', // pink-500
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 min-h-screen">

    <!-- í—¤ë” -->
    <header class="bg-gradient-to-r from-primary-dark to-secondary text-white p-5 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto max-w-4xl text-center">
            <h1 class="text-2xl md:text-3xl font-bold">ğŸ“š ì˜¤ëŠ˜ì˜ ì½ì„ê±°ë¦¬</h1>
            <p class="text-sm opacity-90 mt-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="lastUpdated">ë¡œë”©ì¤‘...</span></p>
        </div>
    </header>

    <!-- í•„í„° íƒ­ -->
    <nav class="bg-white shadow-sm sticky top-[76px] z-40">
        <div class="container mx-auto max-w-4xl p-3 overflow-x-auto no-scrollbar">
            <div id="filterTabs" class="flex space-x-2 whitespace-nowrap">
                <!-- íƒ­ì€ JSë¡œ ë™ì  ìƒì„± -->
                <button class="filter-tab active" data-filter="all">ì „ì²´</button>
            </div>
        </div>
    </nav>

    <!-- ê¸°ì‚¬ ì»¨í…Œì´ë„ˆ -->
    <main class="container mx-auto max-w-4xl p-3 md:p-5">
        <div id="articlesContainer" class="grid grid-cols-1 gap-4">
            <!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
            <div id="loadingSpinner" class="flex justify-center items-center py-20">
                <svg class="animate-spin h-8 w-8 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span class="ml-3 text-gray-600">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
            </div>
            <!-- ê¸°ì‚¬ ì¹´ë“œëŠ” JSë¡œ ë™ì  ìƒì„± -->
        </div>
    </main>

    <!-- ëª¨ë‹¬ -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 hidden" role="dialog" aria-modal="true">
        <div id="modalContent" class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-all opacity-0 -translate-y-10">
            <!-- ëª¨ë‹¬ í—¤ë” -->
            <header class="flex justify-between items-center p-4 border-b border-gray-200">
                <h2 id="modalTitle" class="text-xl font-semibold text-gray-800 flex-1 pr-4">ëª¨ë‹¬ ì œëª©</h2>
                <button id="closeModal" class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close modal">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </header>
            
            <!-- ëª¨ë‹¬ ë³¸ë¬¸ (ìŠ¤í¬ë¡¤) -->
            <div class="p-5 overflow-y-auto">
                <div class="mb-4">
                    <span id="modalSource" class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-indigo-100 text-indigo-800"></span>
                    <span id="modalDate" class="ml-2 text-xs text-gray-500"></span>
                </div>
                <h3 class="text-lg font-semibold text-gray-700 mb-2">í•œê¸€ ìš”ì•½</h3>
                <p id="modalSummary" class="text-gray-600 leading-relaxed bg-gray-50 p-4 rounded-lg whitespace-pre-line"></p>
                
                <h3 class="text-lg font-semibold text-gray-700 mt-5 mb-2">ì›ë³¸ ì œëª©</h3>
                <p id="modalTitleEn" class="text-gray-500 italic bg-gray-50 p-4 rounded-lg"></p>
            </div>

            <!-- ëª¨ë‹¬ í‘¸í„° -->
            <footer class="p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl">
                <a id="originalLink" href="#" target="_blank" rel="noopener noreferrer" class="w-full text-center block bg-primary text-white font-semibold py-3 px-5 rounded-lg hover:bg-primary-dark transition-colors shadow-sm">
                    ğŸ”— ì›ë¬¸ ê¸°ì‚¬ ë³´ê¸°
                </a>
            </footer>
        </div>
    </div>


    <script>
        let allArticles = [];
        let currentFilter = 'all';

        // ì†ŒìŠ¤ë³„ ìƒ‰ìƒ/ì´ë¦„ ë§¤í•‘
        const sourceMeta = {
            'Nature': { color: 'bg-green-100 text-green-800', name: 'Nature' },
            'Nature (Paper)': { color: 'bg-green-100 text-green-800', name: 'Nature (ë…¼ë¬¸)' },
            'Science': { color: 'bg-blue-100 text-blue-800', name: 'Science' },
            'Science (Paper)': { color: 'bg-blue-100 text-blue-800', name: 'Science (ë…¼ë¬¸)' },
            'Cell': { color: 'bg-red-100 text-red-800', name: 'Cell' },
            'The Transmitter': { color: 'bg-purple-100 text-purple-800', name: 'The Transmitter' },
            'Nature Neuroscience': { color: 'bg-teal-100 text-teal-800', name: 'Nature Neuro' },
            'Nature Medicine': { color: 'bg-cyan-100 text-cyan-800', name: 'Nature Med' },
            'Nature Drug Discovery': { color: 'bg-yellow-100 text-yellow-800', name: 'Nature Drug Disc' },
            'Nature Biotechnology': { color: 'bg-orange-100 text-orange-800', name: 'Nature Biotech' },
            'B_ZCF YouTube': { color: 'bg-red-100 text-red-800', name: 'YouTube' },
            'default': { color: 'bg-gray-100 text-gray-800', name: 'Unknown' }
        };
        
        // í•„í„° íƒ­ ìŠ¤íƒ€ì¼
        const tabBaseStyle = "px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 cursor-pointer";
        const tabInactiveStyle = "bg-gray-100 text-gray-700 hover:bg-gray-200";
        const tabActiveStyle = "bg-primary text-white shadow-md";

        document.addEventListener('DOMContentLoaded', () => {
            loadArticles();
            setupModalListeners();
        });

        async function loadArticles() {
            try {
                // ìºì‹œ ë°©ì§€ë¥¼ ìœ„í•´ íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€
                const response = await fetch(`articles.json?v=${new Date().getTime()}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                // articles í‚¤ê°€ ì—†ëŠ” ê²½ìš° ë˜ëŠ” ë°°ì—´ì´ ì•„ë‹Œ ê²½ìš° ì²˜ë¦¬
                if (!data.articles || !Array.isArray(data.articles)) {
                    console.warn("'articles' í‚¤ê°€ ì—†ê±°ë‚˜ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤.", data);
                    allArticles = [];
                } else {
                     allArticles = data.articles;
                }

                document.getElementById('lastUpdated').textContent = data.last_updated || 'N/A';
                
                // ë‚ ì§œ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ (ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ)
                if(allArticles.length > 0) {
                    allArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
                }
                
                document.getElementById('loadingSpinner').classList.add('hidden');
                
                generateFilterTabs();
                renderArticles();

            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                document.getElementById('articlesContainer').innerHTML = 
                    `<div class="text-center p-10 bg-white rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-red-600">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h3>
                        <p class="text-gray-600 mt-2">articles.json íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p class="text-gray-500 text-sm mt-1">ì½˜ì†”(F12)ì—ì„œ ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                    </div>`;
            }
        }

        function generateFilterTabs() {
            const tabsContainer = document.getElementById('filterTabs');
            
            // ì¹´í…Œê³ ë¦¬ì™€ ì†ŒìŠ¤ë¡œ íƒ­ ìƒì„±
            const categories = [...new Set(allArticles.map(a => a.category))];
            const sources = [...new Set(allArticles.map(a => a.source))];
            
            const filters = ['all', ...categories, ...sources];
            
            // ê¸°ì¡´ íƒ­ ì œê±° (ì „ì²´ íƒ­ ì œì™¸)
            tabsContainer.innerHTML = `<button class="filter-tab ${tabBaseStyle} ${tabActiveStyle}" data-filter="all">ì „ì²´</button>`;

            // ì¹´í…Œê³ ë¦¬ íƒ­ (News, Paper, Video...)
            categories.forEach(filter => {
                if (filter) { // nullì´ë‚˜ undefined ë°©ì§€
                    tabsContainer.innerHTML += `<button class="filter-tab ${tabBaseStyle} ${tabInactiveStyle}" data-filter="${filter}">${filter}</button>`;
                }
            });

            // ì†ŒìŠ¤ íƒ­ (Nature, Science...)
            sources.forEach(filter => {
                 if (filter) {
                    const meta = sourceMeta[filter] || sourceMeta.default;
                    tabsContainer.innerHTML += `<button class="filter-tab ${tabBaseStyle} ${tabInactiveStyle}" data-filter="${filter}">${meta.name}</button>`;
                 }
            });

            // íƒ­ í´ë¦­ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', () => filterArticles(tab.dataset.filter));
            });
        }

        function renderArticles() {
            const container = document.getElementById('articlesContainer');
            
            const filtered = currentFilter === 'all' 
                ? allArticles 
                : allArticles.filter(a => a.category === currentFilter || a.source === currentFilter);
            
            if (filtered.length === 0) {
                // ë¡œë”©ì´ ëë‚¬ëŠ”ë°ë„ articlesê°€ ë¹„ì–´ìˆëŠ” ê²½ìš°
                if (allArticles.length === 0 && document.getElementById('loadingSpinner').classList.contains('hidden')) {
                     container.innerHTML = `<div class="text-center p-10 bg-white rounded-lg shadow">
                                          <h3 class="text-xl font-semibold text-gray-700">ìƒˆ ê¸°ì‚¬ë¥¼ ìˆ˜ì§‘ ì¤‘ì…ë‹ˆë‹¤</h3>
                                          <p class="text-gray-500 mt-2">ì ì‹œ í›„ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.</p>
                                      </div>`;
                } else {
                     container.innerHTML = `<div class="text-center p-10 bg-white rounded-lg shadow">
                                          <h3 class="text-xl font-semibold text-gray-700">í‘œì‹œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                                          <p class="text-gray-500 mt-2">ì„ íƒí•œ í•„í„°ì— í•´ë‹¹í•˜ëŠ” ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                                      </div>`;
                }
                return;
            }
            
            container.innerHTML = filtered.map(article => {
                const meta = sourceMeta[article.source] || sourceMeta.default;
                
                // article ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜ (ë”°ì˜´í‘œ ë¬¸ì œ í•´ê²°)
                // article ê°ì²´ê°€ nullì´ ì•„ë‹Œì§€ í™•ì¸
                if (!article) return '';

                return `
                <article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer" 
                         onclick='openModal(JSON.parse(decodeURIComponent("${encodeURIComponent(JSON.stringify(article))}")))'
                         role="button"
                         aria-labelledby="title-${(article.url || Math.random()).hashCode()}">
                    <div class="p-5">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-medium px-2.5 py-0.5 rounded-full ${meta.color}">${meta.name}</span>
                            <span class="text-xs text-gray-500">${article.date}</span>
                        </div>
                        <h3 id="title-${(article.url || Math.random()).hashCode()}" class="text-lg font-semibold text-gray-800 hover:text-primary transition-colors">${article.title}</h3>
                        <p class="text-sm text-gray-500 mt-1">${article.category}</p>
                    </div>
                </article>
                `;
            }).join('');
        }
        
        // String.hashCode() - ê°„ë‹¨í•œ í•´ì‹œ í•¨ìˆ˜ (ê³ ìœ  IDìš©)
        String.prototype.hashCode = function() {
            var hash = 0, i, chr;
            if (this.length === 0) return hash;
            for (i = 0; i < this.length; i++) {
                chr   = this.charCodeAt(i);
                hash  = ((hash << 5) - hash) + chr;
                hash |= 0; // Convert to 32bit integer
            }
            return Math.abs(hash);
        };

        function filterArticles(filter) {
            currentFilter = filter;
            
            document.querySelectorAll('.filter-tab').forEach(tab => {
                if (tab.dataset.filter === filter) {
                    tab.className = `filter-tab ${tabBaseStyle} ${tabActiveStyle}`;
                } else {
                    tab.className = `filter-tab ${tabBaseStyle} ${tabInactiveStyle}`;
                }
            });
            
            renderArticles();
        }

        // --- ëª¨ë‹¬ ë¡œì§ ---
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modalContent');
        const closeModalBtn = document.getElementById('closeModal');

        function openModal(article) {
            if (!article) return; // ë¹„ì •ìƒì ì¸ ë°ì´í„° ë°©ì§€

            document.getElementById('modalTitle').textContent = article.title || 'ì œëª© ì—†ìŒ';
            document.getElementById('modalSummary').textContent = article.summary_kr || 'ìš”ì•½ ì—†ìŒ';
            document.getElementById('modalTitleEn').textContent = article.title_en || 'Original title not available';
            document.getElementById('originalLink').href = article.url || '#';
            document.getElementById('modalDate').textContent = article.date || 'ë‚ ì§œ ì—†ìŒ';

            const meta = sourceMeta[article.source] || sourceMeta.default;
            const sourceEl = document.getElementById('modalSource');
            sourceEl.textContent = meta.name;
            sourceEl.className = `text-xs font-medium px-2.5 py-0.5 rounded-full ${meta.color}`;

            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden'); // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            setTimeout(() => {
                modalContent.classList.remove('opacity-0', '-translate-y-10');
            }, 10); // ë¸Œë¼ìš°ì €ê°€ 'hidden' ì œê±°ë¥¼ ì¸ì§€í•  ì‹œê°„ì„ ì¤Œ
        }

        function closeModal() {
            modalContent.classList.add('opacity-0', '-translate-y-10');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
            }, 200); // 200msëŠ” transition ì‹œê°„ê³¼ ì¼ì¹˜
        }

        function setupModalListeners() {
            closeModalBtn.addEventListener('click', closeModal);

            // ëª¨ë‹¬ ë°”ê¹¥ìª½ í´ë¦­ ì‹œ ë‹«ê¸°
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // ESC í‚¤ë¡œ ë‹«ê¸°
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        }
    </script>
</body>
</html>

